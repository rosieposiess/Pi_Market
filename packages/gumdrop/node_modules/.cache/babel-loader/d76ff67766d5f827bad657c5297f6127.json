{"ast":null,"code":"import _slicedToArray from\"/home/haeun/metaplex/js/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useWallet,WalletProvider as BaseWalletProvider}from'@solana/wallet-adapter-react';import{getLedgerWallet,getMathWallet,getPhantomWallet,getSolflareWallet,getSolletWallet,getSolongWallet,getTorusWallet}from'@solana/wallet-adapter-wallets';import{Button}from'antd';import React,{createContext,useCallback,useContext,useEffect,useMemo,useState}from'react';import{notify}from'@oyster/common';import{DefaultModal}from'../../components';import'./wallet.less';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var WalletModalContext=/*#__PURE__*/createContext({});export function useWalletModal(){return useContext(WalletModalContext);}export var WalletModal=function WalletModal(){var _useWallet=useWallet(),wallets=_useWallet.wallets,selected=_useWallet.wallet,select=_useWallet.select;var _useWalletModal=useWalletModal(),visible=_useWalletModal.visible,setVisible=_useWalletModal.setVisible;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),setShowWallets=_useState2[1];var close=useCallback(function(){setVisible(false);setShowWallets(false);},[setVisible,setShowWallets]);return/*#__PURE__*/_jsxs(DefaultModal,{visible:visible,onCancel:close,children:[/*#__PURE__*/_jsx(\"div\",{style:{background:'linear-gradient(180deg, #D329FC 0%, #8F6DDE 49.48%, #19E6AD 100%)',borderRadius:36,width:50,height:50,textAlign:'center',verticalAlign:'middle',fontWeight:700,fontSize:'1.3rem',lineHeight:2.4,marginBottom:10}}),/*#__PURE__*/_jsx(\"h2\",{style:{color:'white',fontWeight:'bold',fontSize:'1.2rem'},children:selected?'Change provider':''}),/*#__PURE__*/_jsx(\"p\",{style:{color:'white',fontSize:'1rem'},children:selected?'Choose from the following options:':'Please sign into your wallet'}),/*#__PURE__*/_jsx(\"br\",{}),wallets.map(function(wallet){return/*#__PURE__*/_jsx(Button,{size:\"large\",type:wallet===selected?'primary':'ghost',onClick:function onClick(){select(wallet.name);close();},icon:/*#__PURE__*/_jsx(\"img\",{alt:\"\".concat(wallet.name),width:20,height:20,src:wallet.icon,style:{marginRight:30,float:'left'}}),style:{display:'block',width:'100%',textAlign:'left',marginBottom:8,color:'white'},children:wallet.name},wallet.name);})]});};export var WalletModalProvider=function WalletModalProvider(_ref){var children=_ref.children;var _useWallet2=useWallet(),publicKey=_useWallet2.publicKey;var _useState3=useState(!!publicKey),_useState4=_slicedToArray(_useState3,2),connected=_useState4[0],setConnected=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),visible=_useState6[0],setVisible=_useState6[1];useEffect(function(){if(publicKey){var base58=publicKey.toBase58();var keyToDisplay=base58.length>20?\"\".concat(base58.substring(0,7),\".....\").concat(base58.substring(base58.length-7,base58.length)):base58;notify({message:'Wallet update',description:'Connected to wallet '+keyToDisplay});}},[publicKey]);useEffect(function(){if(!publicKey&&connected){notify({message:'Wallet update',description:'Disconnected from wallet'});}setConnected(!!publicKey);},[publicKey,connected,setConnected]);return/*#__PURE__*/_jsxs(WalletModalContext.Provider,{value:{visible:visible,setVisible:setVisible},children:[children,/*#__PURE__*/_jsx(WalletModal,{})]});};export var WalletProvider=function WalletProvider(_ref2){var children=_ref2.children;var wallets=useMemo(function(){return[getPhantomWallet(),getSolflareWallet(),getTorusWallet({options:{clientId:'BEB_D44HovHuXH0Ace97QVqSu1ahCKndjpGhzhVcMy_9XmDTbHyqTbzQTufcyaN0kFwtlVbfPzJwpJXg94gWJqE',uxMode:'redirect'}}),getLedgerWallet(),getSolongWallet(),getMathWallet(),getSolletWallet()];},[]);var onError=useCallback(function(error){console.error(error);notify({message:'Wallet error',description:error.message});},[]);return/*#__PURE__*/_jsx(BaseWalletProvider,{wallets:wallets,onError:onError,autoConnect:true,children:/*#__PURE__*/_jsx(WalletModalProvider,{children:children})});};","map":{"version":3,"sources":["/home/haeun/metaplex/js/packages/gumdrop/src/contexts/WalletContext/WalletContext.tsx"],"names":["useWallet","WalletProvider","BaseWalletProvider","getLedgerWallet","getMathWallet","getPhantomWallet","getSolflareWallet","getSolletWallet","getSolongWallet","getTorusWallet","Button","React","createContext","useCallback","useContext","useEffect","useMemo","useState","notify","DefaultModal","WalletModalContext","useWalletModal","WalletModal","wallets","selected","wallet","select","visible","setVisible","setShowWallets","close","background","borderRadius","width","height","textAlign","verticalAlign","fontWeight","fontSize","lineHeight","marginBottom","color","map","name","icon","marginRight","float","display","WalletModalProvider","children","publicKey","connected","setConnected","base58","toBase58","keyToDisplay","length","substring","message","description","options","clientId","uxMode","onError","error","console"],"mappings":"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","sourcesContent":["import { WalletAdapter, WalletError } from '@solana/wallet-adapter-base';\nimport {\n  useWallet,\n  WalletProvider as BaseWalletProvider,\n} from '@solana/wallet-adapter-react';\nimport {\n  getLedgerWallet,\n  getMathWallet,\n  getPhantomWallet,\n  getSolflareWallet,\n  getSolletWallet,\n  getSolongWallet,\n  getTorusWallet,\n} from '@solana/wallet-adapter-wallets';\nimport { Button } from 'antd';\nimport React, {\n  createContext,\n  FC,\n  ReactNode,\n  useCallback,\n  useContext,\n  useEffect,\n  useMemo,\n  useState,\n} from 'react';\nimport { notify } from '@oyster/common';\nimport { DefaultModal } from '../../components';\n\nimport './wallet.less';\n\nexport interface WalletModalContextState {\n  visible: boolean;\n  setVisible: (open: boolean) => void;\n}\n\nexport const WalletModalContext = createContext<WalletModalContextState>(\n  {} as WalletModalContextState,\n);\n\nexport function useWalletModal(): WalletModalContextState {\n  return useContext(WalletModalContext);\n}\n\nexport const WalletModal: FC = () => {\n  const { wallets, wallet: selected, select } = useWallet();\n  const { visible, setVisible } = useWalletModal();\n  const [, setShowWallets] = useState(false);\n  const close = useCallback(() => {\n    setVisible(false);\n    setShowWallets(false);\n  }, [setVisible, setShowWallets]);\n\n  return (\n    <DefaultModal visible={visible} onCancel={close}>\n      <div\n        style={{\n          background:\n            'linear-gradient(180deg, #D329FC 0%, #8F6DDE 49.48%, #19E6AD 100%)',\n          borderRadius: 36,\n          width: 50,\n          height: 50,\n          textAlign: 'center',\n          verticalAlign: 'middle',\n          fontWeight: 700,\n          fontSize: '1.3rem',\n          lineHeight: 2.4,\n          marginBottom: 10,\n        }}\n      ></div>\n      <h2\n        style={{\n          color: 'white',\n          fontWeight: 'bold',\n          fontSize: '1.2rem',\n        }}\n      >\n        {selected ? 'Change provider' : ''}\n      </h2>\n      <p style={{ color: 'white', fontSize: '1rem' }}>\n        {selected\n          ? 'Choose from the following options:'\n          : 'Please sign into your wallet'}\n      </p>\n\n      <br />\n      {wallets.map(wallet => {\n        return (\n          <Button\n            key={wallet.name}\n            size=\"large\"\n            type={wallet === selected ? 'primary' : 'ghost'}\n            onClick={() => {\n              select(wallet.name);\n              close();\n            }}\n            icon={\n              <img\n                alt={`${wallet.name}`}\n                width={20}\n                height={20}\n                src={wallet.icon}\n                style={{ marginRight: 30, float: 'left' }}\n              />\n            }\n            style={{\n              display: 'block',\n              width: '100%',\n              textAlign: 'left',\n              marginBottom: 8,\n              color: 'white',\n            }}\n          >\n            {wallet.name}\n          </Button>\n        );\n      })}\n    </DefaultModal>\n  );\n};\n\nexport const WalletModalProvider: FC<{ children: ReactNode }> = ({\n  children,\n}) => {\n  const { publicKey } = useWallet();\n  const [connected, setConnected] = useState(!!publicKey);\n  const [visible, setVisible] = useState(false);\n\n  useEffect(() => {\n    if (publicKey) {\n      const base58 = publicKey.toBase58();\n      const keyToDisplay =\n        base58.length > 20\n          ? `${base58.substring(0, 7)}.....${base58.substring(\n              base58.length - 7,\n              base58.length,\n            )}`\n          : base58;\n\n      notify({\n        message: 'Wallet update',\n        description: 'Connected to wallet ' + keyToDisplay,\n      });\n    }\n  }, [publicKey]);\n\n  useEffect(() => {\n    if (!publicKey && connected) {\n      notify({\n        message: 'Wallet update',\n        description: 'Disconnected from wallet',\n      });\n    }\n    setConnected(!!publicKey);\n  }, [publicKey, connected, setConnected]);\n\n  return (\n    <WalletModalContext.Provider\n      value={{\n        visible,\n        setVisible,\n      }}\n    >\n      {children}\n      <WalletModal />\n    </WalletModalContext.Provider>\n  );\n};\n\nexport const WalletProvider: FC<{ children: ReactNode }> = ({ children }) => {\n  const wallets = useMemo(\n    () => [\n      getPhantomWallet(),\n      getSolflareWallet(),\n      getTorusWallet({\n        options: {\n          clientId:\n            'BEB_D44HovHuXH0Ace97QVqSu1ahCKndjpGhzhVcMy_9XmDTbHyqTbzQTufcyaN0kFwtlVbfPzJwpJXg94gWJqE',\n          uxMode: 'redirect',\n        },\n      }),\n      getLedgerWallet(),\n      getSolongWallet(),\n      getMathWallet(),\n      getSolletWallet(),\n    ],\n    [],\n  );\n\n  const onError = useCallback((error: WalletError) => {\n    console.error(error);\n    notify({\n      message: 'Wallet error',\n      description: error.message,\n    });\n  }, []);\n\n  return (\n    <BaseWalletProvider wallets={wallets} onError={onError} autoConnect>\n      <WalletModalProvider>{children}</WalletModalProvider>\n    </BaseWalletProvider>\n  );\n};\n\nexport type WalletSigner = Pick<\n  WalletAdapter,\n  'publicKey' | 'signTransaction' | 'signAllTransactions'\n>;\n"]},"metadata":{},"sourceType":"module"}