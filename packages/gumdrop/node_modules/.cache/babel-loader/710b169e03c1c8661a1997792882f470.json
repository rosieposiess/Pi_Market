{"ast":null,"code":"import _slicedToArray from\"/home/haeun/metaplex/js/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import{useColorMode}from'../contexts/ColorModeContext';import{jsx as _jsx}from\"react/jsx-runtime\";export var DragAndDrop=function DragAndDrop(props){var dropRef=React.useRef(null);var _React$useState=React.useState(0),_React$useState2=_slicedToArray(_React$useState,2),dragCounter=_React$useState2[0],setDragCounter=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),dragging=_React$useState4[0],setDragging=_React$useState4[1];var handleDrag=function handleDrag(e){e.preventDefault();e.stopPropagation();};var handleDragIn=function handleDragIn(e){e.preventDefault();e.stopPropagation();setDragCounter(dragCounter+1);if(e.dataTransfer.items&&e.dataTransfer.items.length>0){setDragging(true);}};var handleDragOut=function handleDragOut(e){e.preventDefault();e.stopPropagation();var remainingDrags=dragCounter-1;setDragCounter(remainingDrags);if(remainingDrags===0){setDragging(false);}};var handleDrop=function handleDrop(e){e.preventDefault();e.stopPropagation();setDragging(false);if(e.dataTransfer.files&&e.dataTransfer.files.length>0){props.handleDrop(e.dataTransfer.files);e.dataTransfer.clearData();setDragCounter(0);}};React.useEffect(function(){var node=dropRef.current;if(node===null)return;node.addEventListener('dragenter',handleDragIn);node.addEventListener('dragleave',handleDragOut);node.addEventListener('dragover',handleDrag);node.addEventListener('drop',handleDrop);return function(){node.removeEventListener('dragenter',handleDragIn);node.removeEventListener('dragleave',handleDragOut);node.removeEventListener('dragover',handleDrag);node.removeEventListener('drop',handleDrop);};});var colorModeCtx=useColorMode();var shade=colorModeCtx.mode==='dark'?'rgba(255,255,255,.1)':'rgba(0, 0, 0,.1)';return/*#__PURE__*/_jsx(\"div\",{ref:dropRef,style:dragging?{backgroundColor:shade}:{},children:props.children});};export default DragAndDrop;","map":{"version":3,"sources":["/home/haeun/metaplex/js/packages/gumdrop/src/components/DragAndDrop.tsx"],"names":["React","useColorMode","DragAndDrop","props","dropRef","useRef","useState","dragCounter","setDragCounter","dragging","setDragging","handleDrag","e","preventDefault","stopPropagation","handleDragIn","dataTransfer","items","length","handleDragOut","remainingDrags","handleDrop","files","clearData","useEffect","node","current","addEventListener","removeEventListener","colorModeCtx","shade","mode","backgroundColor","children"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { useColorMode } from '../contexts/ColorModeContext';\n\nexport const DragAndDrop = (props: {\n  handleDrop: (files: FileList) => void;\n  children: React.ReactNode;\n}) => {\n  const dropRef = React.useRef<HTMLDivElement>(null);\n  const [dragCounter, setDragCounter] = React.useState(0);\n  const [dragging, setDragging] = React.useState(false);\n\n  const handleDrag = e => {\n    e.preventDefault();\n    e.stopPropagation();\n  };\n\n  const handleDragIn = e => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    setDragCounter(dragCounter + 1);\n    if (e.dataTransfer.items && e.dataTransfer.items.length > 0) {\n      setDragging(true);\n    }\n  };\n\n  const handleDragOut = e => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    const remainingDrags = dragCounter - 1;\n    setDragCounter(remainingDrags);\n    if (remainingDrags === 0) {\n      setDragging(false);\n    }\n  };\n\n  const handleDrop = e => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    setDragging(false);\n    if (e.dataTransfer.files && e.dataTransfer.files.length > 0) {\n      props.handleDrop(e.dataTransfer.files);\n      e.dataTransfer.clearData();\n      setDragCounter(0);\n    }\n  };\n\n  React.useEffect(() => {\n    const node = dropRef.current;\n    if (node === null) return;\n    node.addEventListener('dragenter', handleDragIn);\n    node.addEventListener('dragleave', handleDragOut);\n    node.addEventListener('dragover', handleDrag);\n    node.addEventListener('drop', handleDrop);\n\n    return () => {\n      node.removeEventListener('dragenter', handleDragIn);\n      node.removeEventListener('dragleave', handleDragOut);\n      node.removeEventListener('dragover', handleDrag);\n      node.removeEventListener('drop', handleDrop);\n    };\n  });\n\n  const colorModeCtx = useColorMode();\n  const shade =\n    colorModeCtx.mode === 'dark' ? 'rgba(255,255,255,.1)' : 'rgba(0, 0, 0,.1)';\n\n  return (\n    <div ref={dropRef} style={dragging ? { backgroundColor: shade } : {}}>\n      {props.children}\n    </div>\n  );\n};\n\nexport default DragAndDrop;\n"]},"metadata":{},"sourceType":"module"}